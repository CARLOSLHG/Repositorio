    (function() {
        // Versi√≥n 3.0 - Sistema de misiles + Packs de munici√≥n
        const playerScreen = document.getElementById('player-screen');
        const playerNameInput = document.getElementById('player-name-input');
        const startGameButton = document.getElementById('start-game-button');
        const gameContainer = document.getElementById('game-container');
        const spaceship = document.getElementById('spaceship');
        const playerDisplay = document.getElementById('player-display');
        let playerName = '';
        let gameStarted = false;
        let gameOver = false;
        let lightYears = 0;
        let asteroidCount = 0;
        let cyberattackCount = 0;
        let musicPlaying = true;
        let asteroidGenerationInterval;
        let gameStartTime = null;
        let currentEntryId = null;

        // --- Sistema de misiles ---
        let missileCount = 50;
        let ammoPackTimeout = null;
        let missilesUsed = 0;
        let packsCollected = 0;
        const AMMO_PACK_TYPES = [
            { amount: 25,  label: 'PATCH',    color: '#22cc66', glowColor: '#22cc66', darkColor: '#178a44', img: 'data:image/png;base64,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', probability: 0.50 },
            { amount: 50,  label: 'FIREWALL', color: '#d4a017', glowColor: '#d4a017', darkColor: '#9a7510', img: 'data:image/png;base64,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', probability: 0.30 },
            { amount: 75,  label: 'ENCRYPT',  color: '#f0c040', glowColor: '#f0c040', darkColor: '#c89a20', img: 'data:image/png;base64,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', probability: 0.15 },
            { amount: 100, label: 'ZERO-DAY', color: '#00bfff', glowColor: '#00bfff', darkColor: '#0088bb', img: 'data:image/png;base64,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', probability: 0.05 }
        ];

        // --- Super Capsule: God Mode ---
        let godModeActive = false;
        let godModeTimer = null;
        let godModeBlinkTimer = null;
        let godModeAutoFireInterval = null;
        let superCapsuleSpawnTimeout = null;
        let activeSuperCapsules = [];
        const GOD_MODE_DURATION = 10000;       // 10 segundos
        const GOD_MODE_WARN_AT = 5000;         // parpadeo a los 5s restantes
        const GOD_MODE_AUTOFIRE_RATE = 120;    // ms entre disparos autom√°ticos

        // --- Sistema de dificultad progresiva ---
        let maxDifficultyLevel = 0;
        let asteroidSpawnTimeout = null;

        const DIFFICULTY_LEVELS = [
            { name: 'SEGURO',      color: '#22cc66', threshold: 0 },
            { name: 'ALERTA',      color: '#ffcc00', threshold: 30 },
            { name: 'PELIGRO',     color: '#ff8800', threshold: 60 },
            { name: 'CR√çTICO',     color: '#ff3b3f', threshold: 120 },
            { name: 'EXTREMO',     color: '#cc00ff', threshold: 180 },
            { name: 'APOCALIPSIS', color: '#ff0066', threshold: 300 }
        ];

        // Calcula todos los par√°metros de dificultad basado en tiempo transcurrido
        function getDifficulty(elapsedSeconds) {
            // Progresi√≥n suave de 0 a 1 en 300 segundos (5 min) con curva acelerada
            const progress = Math.min(1, elapsedSeconds / 300);
            const factor = Math.pow(progress, 1.4);

            // Determinar nivel visual
            let level = 0;
            for (let i = DIFFICULTY_LEVELS.length - 1; i >= 0; i--) {
                if (elapsedSeconds >= DIFFICULTY_LEVELS[i].threshold) {
                    level = i;
                    break;
                }
            }

            return {
                level: level,
                levelName: DIFFICULTY_LEVELS[level].name,
                levelColor: DIFFICULTY_LEVELS[level].color,

                // Intervalo de spawn de amenazas: 1500ms ‚Üí 500ms
                spawnInterval: 1500 - (1000 * factor),

                // Probabilidad de cyberattack por cada spawn: 0.40 ‚Üí 0.75
                cyberProbability: 0.40 + (0.35 * factor),

                // Velocidad asteroides (duraci√≥n animaci√≥n): 3-6s ‚Üí 1.5-3s
                asteroidSpeedMin: 3 - (1.5 * factor),
                asteroidSpeedRange: 3 - (1.5 * factor),

                // Velocidad cyberattacks: 5-9s ‚Üí 2.5-5s
                cyberSpeedMin: 5 - (2.5 * factor),
                cyberSpeedRange: 4 - (1.5 * factor),

                // Velocidad packs: 4-7s ‚Üí 3-5.5s
                packSpeedMin: 4 - (1 * factor),
                packSpeedRange: 3 - (0.5 * factor),

                // Delay base de packs: 12s ‚Üí 20s (m√°s escasos)
                packBaseDelay: 12000 + (8000 * factor),

                // Delay m√°ximo de packs: 45s ‚Üí 55s
                packMaxDelay: 45000 + (10000 * factor),

                // Incremento de delay por segundo: 50ms ‚Üí 90ms
                packMsPerSecond: 50 + (40 * factor),

                // Probabilidad de multi-spawn (2 asteroides a la vez): 0% ‚Üí 40%
                multiSpawnChance: 0.40 * factor,

                // Shift de probabilidad de packs: los mejores packs se vuelven m√°s raros
                packProbabilityShift: factor * 0.15,

                // Velocidad del fondo: 20s ‚Üí 8s
                backgroundSpeed: 20 - (12 * factor)
            };
        }

        function getDifficultyLevel(elapsedSeconds) {
            for (let i = DIFFICULTY_LEVELS.length - 1; i >= 0; i--) {
                if (elapsedSeconds >= DIFFICULTY_LEVELS[i].threshold) return i;
            }
            return 0;
        }

        // --- Actualizar display de misiles ---
        function updateMissileDisplay() {
            const countEl = document.getElementById('missile-count-text');
            const barEl = document.getElementById('missile-bar');
            if (!countEl || !barEl) return;

            countEl.textContent = missileCount;
            const barPercent = Math.min(100, (missileCount / 200) * 100);
            barEl.style.width = barPercent + '%';

            if (missileCount > 50) {
                barEl.style.background = 'linear-gradient(90deg, #22cc66, #00ffcc)';
                countEl.style.color = '#22cc66';
                countEl.classList.remove('missile-low');
            } else if (missileCount > 25) {
                barEl.style.background = 'linear-gradient(90deg, #ffaa00, #ffcc44)';
                countEl.style.color = '#ffaa00';
                countEl.classList.remove('missile-low');
            } else {
                barEl.style.background = 'linear-gradient(90deg, #ff3b3f, #ff6666)';
                countEl.style.color = '#ff3b3f';
                countEl.classList.add('missile-low');
            }
        }

        // --- Leaderboard: JSONBin.io (compartido) + localStorage (fallback) ---
        const JSONBIN_URL = 'https://api.jsonbin.io/v3/b/';

        function getLocalLeaderboard() {
            try {
                return JSON.parse(localStorage.getItem('cyberspace_leaderboard')) || [];
            } catch (e) {
                return [];
            }
        }

        function saveLocalLeaderboard(board) {
            localStorage.setItem('cyberspace_leaderboard', JSON.stringify(board));
        }

        function sortAndTrimBoard(board) {
            board.sort((a, b) => (b.score || 0) - (a.score || 0));
            if (board.length > 100) board.length = 100;
            return board;
        }

        async function fetchRemoteLeaderboard() {
            const res = await fetch(JSONBIN_URL + JSONBIN_CONFIG.binId + '/latest', {
                headers: { 'X-Master-Key': JSONBIN_CONFIG.apiKey }
            });
            if (!res.ok) throw new Error('JSONBin GET ' + res.status);
            const data = await res.json();
            return data.record.leaderboard || [];
        }

        async function saveRemoteLeaderboard(board) {
            const res = await fetch(JSONBIN_URL + JSONBIN_CONFIG.binId, {
                method: 'PUT',
                headers: {
                    'Content-Type': 'application/json',
                    'X-Master-Key': JSONBIN_CONFIG.apiKey
                },
                body: JSON.stringify({ leaderboard: board })
            });
            if (!res.ok) throw new Error('JSONBin PUT ' + res.status);
        }

        async function getLeaderboard() {
            if (jsonbinEnabled) {
                try {
                    const board = await fetchRemoteLeaderboard();
                    saveLocalLeaderboard(board);
                    return board;
                } catch (e) {
                    console.warn('JSONBin read fall√≥, usando localStorage:', e);
                }
            }
            return getLocalLeaderboard();
        }

        async function addToLeaderboard(name, threats, time) {
            const entryId = Date.now().toString();
            const entry = {
                id: entryId,
                name: name,
                threats: threats,
                time: time,
                score: threats * 100000 + time,
                date: new Date().toLocaleDateString(),
                godRank: isGodRank(threats)
            };

            currentEntryId = entryId;

            if (jsonbinEnabled) {
                try {
                    const remoteBoard = await fetchRemoteLeaderboard();
                    remoteBoard.push(entry);
                    const sorted = sortAndTrimBoard(remoteBoard);
                    await saveRemoteLeaderboard(sorted);
                    saveLocalLeaderboard(sorted);
                    return sorted;
                } catch (e) {
                    console.warn('JSONBin write fall√≥:', e);
                }
            }

            // Fallback: solo localStorage
            const localBoard = getLocalLeaderboard();
            localBoard.push(entry);
            const sorted = sortAndTrimBoard(localBoard);
            saveLocalLeaderboard(sorted);
            return sorted;
        }

        async function clearRemoteLeaderboard() {
            if (!jsonbinEnabled) return;
            try {
                await saveRemoteLeaderboard([]);
            } catch (e) {
                console.warn('JSONBin clear fall√≥:', e);
            }
        }

        // --- Sistema de rangos sci-fi + ciberseguridad (basado en amenazas neutralizadas) ---
        // Primer umbral: 50, cada siguiente +20% del anterior
        const RANK_TABLE = [
            { name: 'Script Kiddie',              color: '#667788' },
            { name: 'Cadete Firewall',             color: '#5599aa' },
            { name: 'Analista de Paquetes',        color: '#44aacc' },
            { name: 'Operador SOC Estelar',        color: '#33bbdd' },
            { name: 'Pentester Cu√°ntico',          color: '#22cc88' },
            { name: 'Centinela Zero-Day',          color: '#44dd55' },
            { name: 'Agente del Rootkit',          color: '#aacc22' },
            { name: 'Cript√≥grafo Interestelar',    color: '#ddbb11' },
            { name: 'Comandante Exploit',          color: '#ff9922' },
            { name: 'Red Team Gal√°ctico',          color: '#ff6633' },
            { name: 'Capit√°n del Kernel',          color: '#ff3355' },
            { name: 'Almirante Ransomware Hunter', color: '#dd22aa' },
            { name: 'Guardi√°n de la Blockchain',   color: '#bb33ff' },
            { name: 'Archon del Deep Web',         color: '#8855ff' },
            { name: 'Leyenda del CyberVoid',       color: '#00ffcc' },
            { name: 'Dios del Ciberespacio',       color: '#ffdd00' }
        ];

        function getRank(threats) {
            let threshold = 50;
            for (let i = 0; i < RANK_TABLE.length - 1; i++) {
                if (threats < threshold) return { ...RANK_TABLE[i], index: i };
                threshold = Math.ceil(threshold * 1.2);
            }
            return { ...RANK_TABLE[RANK_TABLE.length - 1], index: RANK_TABLE.length - 1 };
        }

        function isGodRank(threats) {
            return getRank(threats).index === RANK_TABLE.length - 1;
        }

        function buildLeaderboardHTML(board) {
            let rows = '';
            board.forEach((entry, i) => {
                const isCurrent = (entry.id === currentEntryId);
                const medal = i === 0 ? ' ‚òÖ' : '';
                const rank = getRank(entry.threats || 0);
                const isGod = entry.godRank || isGodRank(entry.threats || 0);
                const godClass = isGod ? ' god-rank' : '';
                const godIcon = isGod ? ' &#9889;' : '';
                rows += `<tr class="${isCurrent ? 'current-player' : ''}${godClass}">
                    <td>${i + 1}${medal}</td>
                    <td>${entry.name}${godIcon}</td>
                    <td>${entry.threats}</td>
                    <td>${entry.time}s</td>
                    <td style="color:${rank.color};text-shadow:0 0 6px ${rank.color}40;">${rank.name}</td>
                    <td>${entry.date}</td>
                </tr>`;
            });
            const modeLabel = jsonbinEnabled ? 'üåê Global' : 'üíª Local';
            return `
                <div id="leaderboard-container">
                    <h2>Leaderboard - Top 100 <span style="font-size:0.6em;color:#5577aa;">${modeLabel}</span></h2>
                    <table id="leaderboard-table">
                        <thead>
                            <tr>
                                <th>#</th>
                                <th>Defensor</th>
                                <th>Amenazas</th>
                                <th>Tiempo</th>
                                <th>Rango</th>
                                <th>Fecha</th>
                            </tr>
                        </thead>
                        <tbody>${rows}</tbody>
                    </table>
                </div>
            `;
        }

        // --- Pantalla de inicio: ingreso de alias ---
        const pregameScreen = document.getElementById('pregame-screen');
        const launchGameButton = document.getElementById('launch-game-button');

        function initPlayerScreen() {
            // Recuperar √∫ltimo alias usado
            const lastAlias = localStorage.getItem('cyberspace_last_alias') || '';
            if (lastAlias) {
                playerNameInput.value = lastAlias;
            }
            playerNameInput.focus();

            function goToLeaderboard(e) {
                e.stopPropagation();
                e.preventDefault();

                const name = playerNameInput.value.trim();
                if (!name) {
                    playerNameInput.style.borderColor = '#ff3b3f';
                    playerNameInput.setAttribute('placeholder', '¬°Debes ingresar un alias!');
                    playerNameInput.focus();
                    return;
                }
                playerName = name;
                // Guardar alias en localStorage
                localStorage.setItem('cyberspace_last_alias', playerName);

                // Mostrar pantalla de leaderboard pre-juego
                playerScreen.style.display = 'none';
                pregameScreen.style.display = 'flex';

                const welcomeEl = document.getElementById('pregame-welcome');
                welcomeEl.innerHTML = `Bienvenido, <strong>${playerName}</strong>`;

                // Cargar leaderboard
                const lbContainer = document.getElementById('pregame-leaderboard');
                getLeaderboard().then(board => {
                    if (board.length === 0) {
                        lbContainer.innerHTML = '<p style="color:#5577aa;">A√∫n no hay registros. ¬°S√© el primero!</p>';
                    } else {
                        lbContainer.innerHTML = buildLeaderboardHTML(board);
                    }
                }).catch(() => {
                    lbContainer.innerHTML = '<p style="color:#ff6666;">Error cargando leaderboard</p>';
                });
            }

            function launchGame() {
                pregameScreen.style.display = 'none';
                gameContainer.style.display = 'block';
                playerDisplay.textContent = `Defensor: ${playerName}`;
                gameStartTime = Date.now();
                gameStarted = true;

                // Pantalla completa al iniciar el juego
                const el = document.documentElement;
                const rfs = el.requestFullscreen || el.webkitRequestFullscreen || el.msRequestFullscreen;
                if (rfs) rfs.call(el).catch(() => {});

                initGame();
            }

            startGameButton.addEventListener('click', goToLeaderboard);
            playerNameInput.addEventListener('keydown', (e) => {
                if (e.key === 'Enter') {
                    e.stopPropagation();
                    e.preventDefault();
                    goToLeaderboard(e);
                }
            });
            launchGameButton.addEventListener('click', launchGame);
        }

        // --- Inicializaci√≥n del juego (se ejecuta tras ingresar alias) ---

        // Arrays para rastrear entidades activas (game loop centralizado)
        let activeMissiles = [];
        let activeHazards = [];  // asteroides + cyberattacks
        let activePacks = [];
        let gameLoopId = null;
        let lastFrameTime = 0;
        let distanceInterval = null;

        // --- Smooth touch movement ---
        let touchTargetBottom = -1;
        let shipCurrentBottom = -1;
        let isTouchControlled = false;
        let lastMobileFireTime = 0;

        // --- Desktop mouse (zero-delay via game loop) ---
        let cachedContainerHeight = 0;
        let cachedSpaceshipHeight = 0;
        let mouseTargetBottom = -1;
        let isMouseControlled = false;

        // --- Background scroll fluido (controlado desde game loop) ---
        let bgScrollX = 0;          // posici√≥n actual (0 a -50, en %)
        let bgCurrentSpeed = 20;    // velocidad actual (segundos para recorrer el ciclo)
        let bgTargetSpeed = 20;     // velocidad objetivo (se interpola hacia esta)
        // Factor de escala: compensa que el elemento ahora mide 1400vh en vez de 200vw.
        // Mantiene la misma velocidad visual (px/s) que con width:200%.
        let bgSpeedScale = 1;
        function updateBgSpeedScale() {
            // oldElementWidth = 2 * vw, newElementWidth = 14 * vh
            // scale = oldWidth / newWidth = (2 * vw) / (14 * vh)
            bgSpeedScale = (2 * window.innerWidth) / (14 * window.innerHeight);
        }

        function initGame() {
            // A√±adir m√∫sica al juego
            const audio = new Audio('./mp3/sound.mp3');
            audio.loop = true;
            audio.volume = 0.08;
            audio.play().catch(() => {});

            // Detecci√≥n de dispositivo t√°ctil (necesario antes de configurar botones)
            const isTouchDevice = 'ontouchstart' in window || navigator.maxTouchPoints > 0 || window.matchMedia('(pointer: coarse)').matches;

            // Funci√≥n para alternar m√∫sica
            const toggleMusicButton = document.getElementById('toggle-music-button');
            function toggleMusic() {
                if (musicPlaying) {
                    audio.pause();
                    toggleMusicButton.textContent = isTouchDevice ? 'Encender M√∫sica' : 'Encender M√∫sica (M)';
                } else {
                    audio.play().catch(() => {});
                    toggleMusicButton.textContent = isTouchDevice ? 'Apagar M√∫sica' : 'Apagar M√∫sica (M)';
                }
                musicPlaying = !musicPlaying;
            }

            // Texto inicial sin "(M)" en m√≥vil
            if (isTouchDevice) {
                toggleMusicButton.textContent = 'Apagar M√∫sica';
            }

            // Bot√≥n para apagar/encender la m√∫sica (desktop click)
            toggleMusicButton.addEventListener('click', (e) => {
                e.stopPropagation();
                toggleMusic();
            });

            // Handlers t√°ctiles dedicados para el bot√≥n de m√∫sica (evita interferir con controles de nave)
            toggleMusicButton.addEventListener('touchstart', function(e) {
                e.preventDefault();
                e.stopPropagation();
                toggleMusic();
                toggleMusicButton.blur();
            }, { passive: false });

            toggleMusicButton.addEventListener('touchend', function(e) {
                e.preventDefault();
                e.stopPropagation();
            }, { passive: false });

            toggleMusicButton.addEventListener('touchcancel', function(e) {
                e.stopPropagation();
            });

            // Tecla M para apagar/encender la m√∫sica
            document.addEventListener('keydown', (e) => {
                if (e.key === 'm' || e.key === 'M') {
                    toggleMusic();
                }
            });

            const distanceCounter = document.getElementById('distance-counter');
            distanceCounter.textContent = `Ciberpasos: ${lightYears}`;

            const asteroidCounter = document.getElementById('asteroid-counter');
            asteroidCounter.textContent = `Paquetes Basura: ${asteroidCount}`;

            const cyberattackCounter = document.getElementById('cyberattack-counter');
            cyberattackCounter.textContent = `Amenazas Neutralizadas: ${cyberattackCount}`;

            // Inicializar display de misiles
            updateMissileDisplay();

            // Cache de dimensiones del contenedor para evitar layout thrashing
            function updateCachedDimensions() {
                cachedContainerHeight = gameContainer.clientHeight;
                cachedSpaceshipHeight = spaceship.clientHeight;
                updateBgSpeedScale();
            }
            window.addEventListener('resize', updateCachedDimensions);
            updateCachedDimensions();

            // Incrementar la distancia recorrida cada segundo + chequeo de misiles + actualizar dificultad
            const difficultyDisplay = document.getElementById('difficulty-display');
            const backgroundEl = document.getElementById('background');

            function updateDifficultyHUD(elapsed) {
                const diff = getDifficulty(elapsed);
                const level = diff.level;
                if (level > maxDifficultyLevel) maxDifficultyLevel = level;

                if (difficultyDisplay) {
                    difficultyDisplay.textContent = `Nivel: ${diff.levelName}`;
                    difficultyDisplay.style.color = diff.levelColor;
                    difficultyDisplay.style.textShadow = `0 0 8px ${diff.levelColor}, 0 0 16px ${diff.levelColor}40`;
                }

                // Actualizar velocidad objetivo del fondo (se interpola en el game loop)
                bgTargetSpeed = diff.backgroundSpeed;
            }

            function startDistanceCounter() {
                distanceInterval = setInterval(() => {
                    if (!gameOver) {
                        lightYears += 1;
                        distanceCounter.textContent = `Ciberpasos: ${lightYears}`;

                        // Actualizar indicador de dificultad
                        updateDifficultyHUD(lightYears);

                        // Seguridad: si los misiles llegan a 0, forzar game over
                        if (missileCount <= 0) {
                            gameOver = true;
                            showGameOverMessage('¬°Has agotado tus misiles!');
                        }
                    }
                }, 1000);
            }

            startDistanceCounter();

            // Movimiento de la nave con el mouse para desktop
            // Solo captura posici√≥n objetivo; se aplica en el game loop (zero-delay, sin layout thrashing)
            document.addEventListener('mousemove', function(event) {
                if (!gameOver && gameStarted) {
                    isMouseControlled = true;
                    const newBottom = cachedContainerHeight - event.clientY - (cachedSpaceshipHeight / 2);
                    mouseTargetBottom = Math.max(0, Math.min(cachedContainerHeight - cachedSpaceshipHeight, newBottom));
                }
            });

            // --- Controles t√°ctiles para m√≥viles (solo movimiento, disparo via bot√≥n) ---
            let touching = false;

            if (isTouchDevice) {
                // Posicionar nave en el primer cuarto de pantalla para mayor maniobrabilidad
                spaceship.style.left = '25%';

                function updateTouchTarget(touchY) {
                    const newBottom = cachedContainerHeight - touchY - (cachedSpaceshipHeight / 2);
                    touchTargetBottom = Math.max(0, Math.min(cachedContainerHeight - cachedSpaceshipHeight, newBottom));
                    // Primer toque: posicionar inmediatamente sin interpolaci√≥n
                    if (!isTouchControlled) {
                        isTouchControlled = true;
                        shipCurrentBottom = touchTargetBottom;
                        spaceship.style.bottom = shipCurrentBottom + 'px';
                    }
                }

                gameContainer.addEventListener('touchstart', function(event) {
                    if (gameOver || !gameStarted) return;
                    if (event.target.closest('button') || event.target.closest('#game-over-message') || event.target.closest('#mobile-fire-button')) return;
                    // Solo aceptar toques en la mitad izquierda de la pantalla para no interferir con botones
                    if (event.touches[0].clientX > window.innerWidth * 0.5) return;
                    event.preventDefault();
                    touching = true;
                    updateTouchTarget(event.touches[0].clientY);
                }, { passive: false });

                gameContainer.addEventListener('touchmove', function(event) {
                    if (!touching || gameOver || !gameStarted) return;
                    event.preventDefault();
                    updateTouchTarget(event.touches[0].clientY);
                }, { passive: false });

                gameContainer.addEventListener('touchend', function() {
                    touching = false;
                });

                gameContainer.addEventListener('touchcancel', function() {
                    touching = false;
                });
            }

            // Verificaci√≥n de colisiones (AABB)
            function isCollision(element1, element2) {
                const rect1 = element1.getBoundingClientRect();
                const rect2 = element2.getBoundingClientRect();

                return !(
                    rect1.top > rect2.bottom ||
                    rect1.bottom < rect2.top ||
                    rect1.right < rect2.left ||
                    rect1.left > rect2.right
                );
            }

            // ========== GAME LOOP CENTRALIZADO (requestAnimationFrame) ==========
            // Fases separadas: WRITE (mover) ‚Üí READ (leer rects) ‚Üí COLLIDE (math pura)
            // Esto evita layout thrashing (no intercalar writes/reads).

            function gameLoop(timestamp) {
                if (gameOver) {
                    activeMissiles.length = 0;
                    activeHazards.length = 0;
                    activePacks.length = 0;
                    activeSuperCapsules.length = 0;
                    return;
                }

                // Delta time normalizado a 60fps (dt=1 a 60fps, dt=2 a 30fps)
                const dt = lastFrameTime ? Math.min((timestamp - lastFrameTime) / 16.67, 3) : 1;
                lastFrameTime = timestamp;

                const screenWidth = window.innerWidth;

                // === MOBILE: Movimiento suave de la nave (interpolaci√≥n lerp) ===
                if (isTouchControlled && touchTargetBottom >= 0) {
                    const smoothing = 0.35; // 35% por frame a 60fps ‚Äî m√°s responsivo
                    const lerpFactor = 1 - Math.pow(1 - smoothing, dt);
                    shipCurrentBottom += (touchTargetBottom - shipCurrentBottom) * lerpFactor;
                    // Snap cuando est√° muy cerca para evitar micro-movimientos infinitos
                    if (Math.abs(touchTargetBottom - shipCurrentBottom) < 0.5) {
                        shipCurrentBottom = touchTargetBottom;
                    }
                    spaceship.style.bottom = shipCurrentBottom + 'px';
                }

                // === DESKTOP: Aplicar posici√≥n del mouse directamente (zero-delay) ===
                if (isMouseControlled && mouseTargetBottom >= 0) {
                    spaceship.style.bottom = mouseTargetBottom + 'px';
                }

                // === MOBILE: Disparo con bot√≥n dedicado (sin auto-fire al tocar) ===
                // El disparo m√≥vil se maneja via #mobile-fire-button (ver evento abajo)

                // === FONDO: scroll fluido con velocidad interpolada ===
                // Interpolar suavemente hacia la velocidad objetivo (lerp ~10% por frame a 60fps)
                const bgLerp = 1 - Math.pow(0.90, dt);
                bgCurrentSpeed += (bgTargetSpeed - bgCurrentSpeed) * bgLerp;
                // Suavizar dt para el fondo: evita saltos por picos de frame
                const bgDt = dt > 1.8 ? 1 + (dt - 1) * 0.3 : dt;
                // Avanzar posici√≥n: -50% en bgCurrentSpeed segundos ‚Üí por frame a 60fps
                // bgSpeedScale compensa width:1400vh vs antiguo width:200%
                bgScrollX -= (50 / (bgCurrentSpeed * 60)) * bgDt * bgSpeedScale;
                if (bgScrollX <= -50) bgScrollX += 50; // loop continuo
                if (backgroundEl) {
                    backgroundEl.style.transform = `translate3d(${bgScrollX}%, 0, 0)`;
                }

                // === FASE WRITE: mover misiles con transform (NO dispara layout) ===
                for (let i = activeMissiles.length - 1; i >= 0; i--) {
                    const m = activeMissiles[i];
                    m.tx += 6 * dt;
                    if (m.originX + m.tx > screenWidth) {
                        m.element.remove();
                        activeMissiles.splice(i, 1);
                        continue;
                    }
                    m.element.style.transform = `translateX(${m.tx}px)`;
                }

                // === FASE READ: leer TODAS las posiciones en un solo batch ===
                // (una sola recalculaci√≥n de layout para todo el frame)
                const spaceshipRect = spaceship.getBoundingClientRect();

                for (let i = 0; i < activeMissiles.length; i++) {
                    activeMissiles[i]._r = activeMissiles[i].element.getBoundingClientRect();
                }
                for (let i = 0; i < activeHazards.length; i++) {
                    activeHazards[i]._r = activeHazards[i].destroyed ? null : activeHazards[i].element.getBoundingClientRect();
                }
                for (let i = 0; i < activePacks.length; i++) {
                    activePacks[i]._r = activePacks[i].destroyed ? null : activePacks[i].element.getBoundingClientRect();
                }
                for (let i = 0; i < activeSuperCapsules.length; i++) {
                    activeSuperCapsules[i]._r = activeSuperCapsules[i].destroyed ? null : activeSuperCapsules[i].element.getBoundingClientRect();
                }

                // === FASE COLLIDE: solo matem√°tica, sin tocar el DOM ===

                // Misiles ‚Üî cyberattacks + packs
                for (let i = activeMissiles.length - 1; i >= 0; i--) {
                    const mR = activeMissiles[i]._r;
                    let hit = false;

                    for (let j = activeHazards.length - 1; j >= 0; j--) {
                        const h = activeHazards[j];
                        if (h.type !== 'cyber' || h.destroyed || !h._r) continue;
                        if (!(mR.top > h._r.bottom || mR.bottom < h._r.top ||
                              mR.right < h._r.left || mR.left > h._r.right)) {
                            h.element.src = './img/exploit.png';
                            h.element.classList.add('destroyed');
                            h.destroyed = true;
                            setTimeout(() => {
                                h.element.remove();
                                const idx = activeHazards.indexOf(h);
                                if (idx !== -1) activeHazards.splice(idx, 1);
                            }, 500);
                            cyberattackCount += 1;
                            cyberattackCounter.textContent = `Amenazas Neutralizadas: ${cyberattackCount}`;
                            // Victoria: alcanz√≥ rango m√°ximo
                            if (isGodRank(cyberattackCount) && !gameOver) {
                                gameOver = true;
                                showVictoryMessage();
                            }
                            hit = true;
                            break;
                        }
                    }

                    if (!hit) {
                        for (let j = activePacks.length - 1; j >= 0; j--) {
                            const p = activePacks[j];
                            if (p.destroyed || !p._r) continue;
                            if (!(mR.top > p._r.bottom || mR.bottom < p._r.top ||
                                  mR.right < p._r.left || mR.left > p._r.right)) {
                                p.element.innerHTML = '<img src="./img/exploit.png" style="width:100%;height:auto;">';
                                p.element.classList.add('destroyed');
                                p.destroyed = true;
                                setTimeout(() => {
                                    p.element.remove();
                                    const idx = activePacks.indexOf(p);
                                    if (idx !== -1) activePacks.splice(idx, 1);
                                }, 500);
                                hit = true;
                                break;
                            }
                        }
                    }

                    if (hit) {
                        activeMissiles[i].element.remove();
                        activeMissiles.splice(i, 1);
                    }
                }

                // Nave ‚Üî hazards (god mode: destruye al contacto en vez de morir)
                for (let i = activeHazards.length - 1; i >= 0; i--) {
                    const h = activeHazards[i];
                    if (h.destroyed || !h._r) continue;
                    if (!(spaceshipRect.top > h._r.bottom || spaceshipRect.bottom < h._r.top ||
                          spaceshipRect.right < h._r.left || spaceshipRect.left > h._r.right)) {
                        if (godModeActive) {
                            // God mode: destruir el hazard al contacto
                            h.element.classList.add('destroyed');
                            h.destroyed = true;
                            if (h.type === 'cyber') {
                                h.element.src = './img/exploit.png';
                                cyberattackCount += 1;
                                cyberattackCounter.textContent = `Amenazas Neutralizadas: ${cyberattackCount}`;
                                if (isGodRank(cyberattackCount) && !gameOver) {
                                    gameOver = true;
                                    deactivateGodMode();
                                    showVictoryMessage();
                                    return;
                                }
                            }
                            setTimeout(() => {
                                h.element.remove();
                                const idx = activeHazards.indexOf(h);
                                if (idx !== -1) activeHazards.splice(idx, 1);
                            }, 300);
                        } else {
                            gameOver = true;
                            showGameOverMessage();
                            return;
                        }
                    }
                }

                // Nave ‚Üî packs (recolecci√≥n)
                for (let i = activePacks.length - 1; i >= 0; i--) {
                    const p = activePacks[i];
                    if (p.destroyed || !p._r) continue;
                    if (!(spaceshipRect.top > p._r.bottom || spaceshipRect.bottom < p._r.top ||
                          spaceshipRect.right < p._r.left || spaceshipRect.left > p._r.right)) {
                        p.destroyed = true;
                        missileCount += p.amount;
                        packsCollected++;
                        updateMissileDisplay();
                        p.element.classList.add('ammo-collected');
                        setTimeout(() => {
                            p.element.remove();
                            const idx = activePacks.indexOf(p);
                            if (idx !== -1) activePacks.splice(idx, 1);
                        }, 400);
                    }
                }

                // Nave ‚Üî super c√°psulas (activa god mode)
                for (let i = activeSuperCapsules.length - 1; i >= 0; i--) {
                    const sc = activeSuperCapsules[i];
                    if (sc.destroyed || !sc._r) continue;
                    if (!(spaceshipRect.top > sc._r.bottom || spaceshipRect.bottom < sc._r.top ||
                          spaceshipRect.right < sc._r.left || spaceshipRect.left > sc._r.right)) {
                        sc.destroyed = true;
                        sc.element.classList.add('ammo-collected');
                        setTimeout(() => {
                            sc.element.remove();
                            const idx = activeSuperCapsules.indexOf(sc);
                            if (idx !== -1) activeSuperCapsules.splice(idx, 1);
                        }, 400);
                        activateGodMode();
                    }
                }

                gameLoopId = requestAnimationFrame(gameLoop);
            }

            // Iniciar el game loop
            lastFrameTime = 0;
            gameLoopId = requestAnimationFrame(gameLoop);

            // ========== FIN GAME LOOP ==========

            // Funci√≥n para disparar misil desde la posici√≥n actual de la nave
            function shootMissile() {
                if (gameOver || !gameStarted) return;
                // En god mode el disparo manual no gasta misiles (usa shootGodMissile)
                if (godModeActive) return;
                if (missileCount <= 0) return;

                missileCount--;
                missilesUsed++;
                updateMissileDisplay();

                // Si se agotaron los misiles, fin del juego inmediato
                if (missileCount <= 0 && !gameOver) {
                    gameOver = true;
                    showGameOverMessage('¬°Has agotado tus misiles!');
                    return;
                }

                const missile = document.createElement('img');
                missile.src = './img/missil.png';
                missile.classList.add('missile');

                const spaceshipRect = spaceship.getBoundingClientRect();
                const gameContainerRect = gameContainer.getBoundingClientRect();

                missile.style.position = 'absolute';
                const bottomVal = parseFloat(spaceship.style.bottom) || (gameContainerRect.height / 2);
                missile.style.bottom = `${bottomVal + spaceshipRect.height - 15}px`;
                const startX = spaceshipRect.left - gameContainerRect.left + spaceshipRect.width;
                missile.style.left = startX + 'px';

                gameContainer.appendChild(missile);

                // Registrar: tx=0 (translateX acumulado), originX para saber cu√°ndo sale de pantalla
                activeMissiles.push({ element: missile, tx: 0, originX: startX });
            }

            // R√°faga de misiles (m√°ximo 5 por r√°faga)
            const BURST_MAX = 5;
            const BURST_DELAY = 100; // ms entre cada misil de la r√°faga
            let burstCooldown = false;

            function shootBurst() {
                if (gameOver || !gameStarted || burstCooldown) return;
                burstCooldown = true;
                const burstCount = Math.min(BURST_MAX, missileCount);
                for (let i = 0; i < burstCount; i++) {
                    setTimeout(() => shootMissile(), i * BURST_DELAY);
                }
                // Cooldown despu√©s de la r√°faga completa
                setTimeout(() => { burstCooldown = false; }, burstCount * BURST_DELAY + 300);
            }

            // Disparo con clic: solo en desktop
            if (!isTouchDevice) {
                document.addEventListener('click', function(e) {
                    if (e.target.closest('button') || e.target.closest('#game-over-message') || e.target.closest('#player-screen')) return;
                    shootBurst();
                });
            }

            // --- Bot√≥n de disparo dedicado para m√≥viles ---
            const mobileFireBtn = document.getElementById('mobile-fire-button');
            if (isTouchDevice && mobileFireBtn) {
                // Mostrar el bot√≥n en dispositivos t√°ctiles
                mobileFireBtn.style.display = 'flex';

                let fireHoldInterval = null;
                const FIRE_HOLD_DELAY = 700; // ms entre r√°fagas al mantener presionado

                function startFiring() {
                    if (gameOver || !gameStarted) return;
                    // Disparar inmediatamente al presionar
                    shootBurst();
                    mobileFireBtn.classList.add('firing');
                    // Si mantiene presionado, disparar r√°fagas continuas
                    if (fireHoldInterval) clearInterval(fireHoldInterval);
                    fireHoldInterval = setInterval(() => {
                        if (gameOver || !gameStarted) {
                            stopFiring();
                            return;
                        }
                        shootBurst();
                    }, FIRE_HOLD_DELAY);
                }

                function stopFiring() {
                    mobileFireBtn.classList.remove('firing');
                    if (fireHoldInterval) {
                        clearInterval(fireHoldInterval);
                        fireHoldInterval = null;
                    }
                }

                mobileFireBtn.addEventListener('touchstart', function(e) {
                    e.preventDefault();
                    e.stopPropagation();
                    startFiring();
                }, { passive: false });

                mobileFireBtn.addEventListener('touchend', function(e) {
                    e.preventDefault();
                    e.stopPropagation();
                    stopFiring();
                }, { passive: false });

                mobileFireBtn.addEventListener('touchcancel', function() {
                    stopFiring();
                });
            }

            // Funci√≥n para generar un asteroide aleatorio (velocidad din√°mica por dificultad)
            function createAsteroid(src, isBottom) {
                const asteroid = document.createElement('img');
                asteroid.src = src;
                asteroid.classList.add('asteroid');

                if (src.includes('rock-13.png')) {
                    asteroid.style.bottom = '0px';
                } else {
                    const bottomPosition = isBottom ? 0 : Math.floor(Math.random() * 80) + 10;
                    asteroid.style.bottom = `${bottomPosition}%`;
                }
                asteroid.style.right = '-100px';

                gameContainer.appendChild(asteroid);

                // Velocidad din√°mica seg√∫n dificultad actual
                const elapsed = (Date.now() - gameStartTime) / 1000;
                const diff = getDifficulty(elapsed);
                const asteroidSpeed = Math.random() * diff.asteroidSpeedRange + diff.asteroidSpeedMin;
                asteroid.style.animation = `moveAsteroid ${asteroidSpeed}s linear forwards`;

                // Registrar en el array para el game loop
                const hazardEntry = { element: asteroid, type: 'asteroid', destroyed: false };
                activeHazards.push(hazardEntry);

                asteroid.addEventListener('animationend', () => {
                    asteroidCount += 1;
                    asteroidCounter.textContent = `Paquetes Basura: ${asteroidCount}`;
                    asteroid.remove();
                    const idx = activeHazards.indexOf(hazardEntry);
                    if (idx !== -1) activeHazards.splice(idx, 1);
                });
            }

            // Funci√≥n para generar un "cyberattack" (velocidad din√°mica por dificultad)
            function createCyberAttack(type) {
                const cyberAttack = document.createElement('img');
                cyberAttack.src = type;
                cyberAttack.classList.add('cyber-attack');

                const bottomPosition = Math.floor(Math.random() * 80) + 10;
                cyberAttack.style.bottom = `${bottomPosition}%`;
                cyberAttack.style.right = '-100px';

                gameContainer.appendChild(cyberAttack);

                // Velocidad din√°mica seg√∫n dificultad actual
                const elapsed = (Date.now() - gameStartTime) / 1000;
                const diff = getDifficulty(elapsed);
                const cyberSpeed = Math.random() * diff.cyberSpeedRange + diff.cyberSpeedMin;
                cyberAttack.style.animation = `moveCyberAttack ${cyberSpeed}s linear forwards`;

                // Registrar en el array para el game loop
                const hazardEntry = { element: cyberAttack, type: 'cyber', destroyed: false };
                activeHazards.push(hazardEntry);

                cyberAttack.addEventListener('animationend', () => {
                    cyberAttack.remove();
                    const idx = activeHazards.indexOf(hazardEntry);
                    if (idx !== -1) activeHazards.splice(idx, 1);
                });
            }

            // --- Crear pack de munici√≥n con SVG de escudo (dificultad din√°mica) ---
            function createAmmoPack() {
                if (gameOver) return;

                const elapsed = (Date.now() - gameStartTime) / 1000;
                const diff = getDifficulty(elapsed);

                // Probabilidades ajustadas: a mayor dificultad, los packs grandes son m√°s raros
                const shift = diff.packProbabilityShift;
                const adjustedTypes = [
                    { ...AMMO_PACK_TYPES[0], probability: AMMO_PACK_TYPES[0].probability + shift },      // PATCH: m√°s com√∫n
                    { ...AMMO_PACK_TYPES[1], probability: AMMO_PACK_TYPES[1].probability },                // FIREWALL: igual
                    { ...AMMO_PACK_TYPES[2], probability: AMMO_PACK_TYPES[2].probability - shift * 0.6 },  // ENCRYPT: m√°s raro
                    { ...AMMO_PACK_TYPES[3], probability: AMMO_PACK_TYPES[3].probability - shift * 0.4 }   // ZERO-DAY: m√°s raro
                ];
                // Normalizar probabilidades
                const totalProb = adjustedTypes.reduce((sum, t) => sum + Math.max(0.01, t.probability), 0);
                adjustedTypes.forEach(t => t.probability = Math.max(0.01, t.probability) / totalProb);

                // Seleccionar tipo basado en probabilidad ajustada
                const rand = Math.random();
                let cumulative = 0;
                let selected = adjustedTypes[0];
                for (const pack of adjustedTypes) {
                    cumulative += pack.probability;
                    if (rand <= cumulative) {
                        selected = pack;
                        break;
                    }
                }

                const packEl = document.createElement('div');
                packEl.classList.add('ammo-pack', `ammo-pack-${selected.amount}`);
                packEl.dataset.amount = selected.amount;

                // Imagen PNG del pack
                const packImg = document.createElement('img');
                packImg.src = selected.img;
                packImg.alt = `${selected.label} +${selected.amount}`;
                packImg.classList.add('ammo-img');
                packImg.draggable = false;
                packEl.appendChild(packImg);

                const bottomPosition = Math.floor(Math.random() * 70) + 15;
                packEl.style.bottom = `${bottomPosition}%`;
                packEl.style.right = '-100px';

                gameContainer.appendChild(packEl);

                // Velocidad din√°mica seg√∫n dificultad
                const packSpeed = Math.random() * diff.packSpeedRange + diff.packSpeedMin;
                packEl.style.animation = `moveAmmoPack ${packSpeed}s linear forwards`;

                // Registrar en el array para el game loop
                const packEntry = { element: packEl, amount: selected.amount, destroyed: false };
                activePacks.push(packEntry);

                packEl.addEventListener('animationend', () => {
                    packEl.remove();
                    const idx = activePacks.indexOf(packEntry);
                    if (idx !== -1) activePacks.splice(idx, 1);
                });
            }

            // --- Spawning progresivo de packs (escasez controlada por dificultad) ---
            function startAmmoPacks() {
                function getSpawnDelay() {
                    const elapsed = (Date.now() - gameStartTime) / 1000;
                    const diff = getDifficulty(elapsed);
                    return Math.min(diff.packMaxDelay, diff.packBaseDelay + elapsed * diff.packMsPerSecond);
                }

                function scheduleNext() {
                    const delay = getSpawnDelay();
                    ammoPackTimeout = setTimeout(() => {
                        if (!gameOver) {
                            createAmmoPack();
                            scheduleNext();
                        }
                    }, delay);
                }

                scheduleNext();
            }

            // --- Super Capsule: God Mode power-up ---
            function createSuperCapsule() {
                if (gameOver || godModeActive) return;

                const capsuleEl = document.createElement('div');
                capsuleEl.classList.add('super-capsule');

                const capsuleImg = document.createElement('img');
                capsuleImg.src = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAACvCAYAAABHLuO3AAAX0UlEQVR4nO2dW2wc13nH/7Nc3pa3XVIiKVGyZdnyLQ4SZGQZiBM0DdZ+aNAHx2Ba+MVBiqp5SG8JghgtUOQptYK0RtsgbVygtVGjibOwgwYIDFeMDSuAIduaPiTy3aQd2RJ1IXcpUrwsueT0YT3U7NlzZs7Mzt5m/z9gsTtnzpyZFXh++s53zs4AhBBCCCGEEEIIIYQQQgghhBBCCCGEEEIIIYQQQgghhBBCCCGEEEIIIYQQQgghhBBCCCGEEEIIIYQQQlQYzb6AuHAmk7GjaMfM5x+Ioh0SHcYJ6+eRNPTIUfa3Gkk2+wLajajE5MF2ndsnzeLRM/K/HYpMGwrLhwYISoTC6jREkVFgSigsCU2QlBsKq9NxC4zyqoDC+pgmS8oNhUWuQ3lV0PHCaiFROVBYHYT9HXMeAIwT1j7fyo68OlhcHSusFhSVA4XVITiycj5rSQvoaHHVVVj28fDHGo9Hdx1u6i0qM5/f/SO0Rkf1/gArobA6ALes3GXa0gLqLy7FpKYWdbqkSIRVi5iCthlWZI2IqNyycrZDSIvCIsGoVVy1iClomzWKLNTRAQRVy9Vp/Sv6CaxRQz9RVm6CSMvM549Fc0UkKowT1qv1aFeMsgJFV174iUtfUHXvv0EFph1h+UhKddZ6xIUV/xDu6xLl1cJ5Ki8YYXUIxglrX6Ckuy6PnrGrpOUtqab134rr0pCXr7A8RCW2HvWXk7VnC+VSeVm5thSVA4XVQUQqKjfOMDFr6sqo6f13V14e4pIKS1NSOl8w6pDSqz0baJ6srNHRfbJhIXNYpKnMWLZLWi3ffwF4Rl0VwlKISvdLNsrQ0jpWLrMT8fkDI0qLs4SkJZixnGiry6NWU/uvsp4QdSUBX1HVMr6tt6GdqKplOnlISblpme9CYsaMte2SVsv0X49zVYkrKZGVl6iCRlhRW7vK0FYuU4r4HM2GwiL1oywtWSqoKf1XsU8ptqSkku6F6yTt6roS18plturZfpOgsEh9mbFKyJrdQmnD+y/kkvIUVxK1iSpoEi8IyvasXGYz4nO1EhQWqT8zVvk/+6zZ83FJw/rvx7hnDLXFlRQLNLYbMdOgmukzrFymGKK9doLCIo1jxtpE1uz1qBFp/w1wrFRc7ghL1mCQ6dAoDS1ty8plNiI8R6tCYZHGMmMVkTX7ImzRf/ZPLwJz17MB/wjLT1QNi7A6RFYAhUWawYy1oZBWvSIs1TBQlXA3gLKwZFJqqZlCK5dZr7WNNoLCIs2hLK1+oTSqkZPODKHvwlKvWcIws4DNmGmIGxQWaSb1/smOg06i3RbfZbOEQSVUj5lC9wr21YjabBcoLNI8Zqw1ZM2BGluJaoawqh13DqteM4Whx8AdKCuAwiLNZsZadUkrqhxWLTOEFcsaRFnpiCrITGGoqMvKZa6FOS4GUFik+ZSlNYj65LBUP8NRiWp3O+iyhiDDw9B0sKwACou0CjPWNWTNoRBH6i5ZkNV1563cdZRJd/dnHVFFOiS0cpnlIPVjSNPvOkHILjPWCrLmcMCjdIeEOuuy3NGWLUZYzg6dBLzusJCzhIS0N7X2YZ3byngtbdjdlxAaUclKLFdJTvbSxsplrgapTwhpADNW0H6p6wMvr4jlBgAY9nH0ehwkHigrl+1T1VNi5TJLOvVI62Pm8086n40T1sPNvBYSIVkzrVnT666/tuKze1tWvpvD8oqqxDKvcnG/XxkhpL3QXZogS6R7taEaDlaVJ6AvK53QLtSw0MplCn51CCFNZsbS6adBXKDap3RSQlFZpwHVxQX6EpQVIW1EWVpBgxMdcQEaHvK742hUw0IOCQmJD0H6s98MofZwEICdEArrNSyUYuUyi6p9hJAWZcby6rd1Gw4ClSvdZWKSnUAsk32WfQlCSHxQ9emgj/IyApRJIyydnJbsGHGf58vKZRYUX4QQ0urMWAvQ6OfCUe4yL2eoyqQRlnZ4Jjmh7DMhpHPw6vs6+Srxt4QVZX45LJ1oS7Sm7ILF6OqKx5ciccAyuGA07sxYV+Cfr/byQxDHACj/NEcnh+XXsM4+ry9FYoJ5snBdVpbxsJ092uQrInVGt6/r7hPL3NsQIyxlRY0y8VipoKxc5hJILDFPypfUUVoxZsYS+3NV3glyTwB6nqnYlt0Py2s7yAWIMLKKKTJRWUcB88z1bUdaxsyZqrqk7XH6dti7MuiU2cD1CMvZUeuwULxYDgdjjHmyoJSV+90No61YotPXax0OGgBg2McxrHkANMq8ymHlMvNiGWk/VEM/maB2j5EEVoy2YkTW3Ccp9br7gliuKqvYdifdHXRlFSTaEo8nbYoqohJldfjw4ao6Inb2KCOu+KDq80GiKrGdKpcY9nGMSCrrvqvKqr6ElctckOwnbYLX0M+NKCoAmJubq2yL0VY8yZr7XVuye2LpRFae76pbJOu8+5WJn0kbEmT4J5OVU+6WlnMsk/KxQ9XftReGerwD8E66uy8gyLBQ1RZpM4IM/1Sy8qrDpHyscTsg6HBQmaZSPUjVS16q+rITkTakluGfH4y2Og7RCV4PS/V9CrRhH0ca1TbUmmIUGlbKysplzqv2kdZBd/gXRlQydHJbAMXVVmTNKY+9WjOBHtu21z3dgeDyIm1IFHmqMOhEW0A54qK0YoHbFX6PpZc9SLXijqNio0HlRdqQeg7/dHDa5TCxowgkKXe5eHsZ3UWglFWb02xRqc4jiovRVmzRlpS7rmEfx6irUCePFSjBzvxVayIKq155qjCIuS2Aa7faCu88lhvZWitl/gqS+2HJ8JsxJG1OK8nKOb/OEgjS9gQduVU9qt7vIA4FY4zOeqpGQml1BLq+MYDKhaNaBxDSSFpNoqRuaC0691vWoGqUEACAnbCxcHAdCzesYWVPERuDJZR6dmAbQGLbQHcxgd61LvStdGOg0I3BfA9GLvehd62r2ZdOWgcxya7a77usgYIiSi7ftIq3P7uIoRtLOHgQuC0DDAwA3d1AIgFsb9vY3NzB+noJq6tFLC8DV5aAt/NAz/le3P0/+5HY5p8YqcI9g1i1rEG3gcB/WZwhjC/vHctj8fNLuPduYGxMXieZLL9Sqeo6zz9fxPrwFgYKPfW/WNJYZqzzAWYKHWTLHKrQFRYhu1y4bQWF31vCF78A9IT0jWEANoMrEhDxqTn8EyKebCdtzN6Tx7Fj4WVFSECq7tagrACKjLjIH1hD+sZtpNPV+5aWgDffBBYXgY0NoKsL6O0F0mlgzx7gwIHy8JAQBWLuyvm8C4eEJBCFfRuYmKgu39oCXnrBwE2nxnDodyn0rnVhJwFspkpY3lvEwtQ63ji0hvTBbdx6K2B7ZioIkUNhkUAUU9vSKGllBei71IODrw/vlnXtAP3L3ehf7sbE7CBu/zVw+fA1nL1rGYZhI7XU3cArJ3GAwiKBsA0bhiRBMDwMbE1tYvbuPCZmBzGYr05wGTYwMTuIidnBBlwpiSMUFglE71oSa2vV5ckk8MWsjXduWMLZ+SVs5BMYWuzB0EIv0pf6kJ7vQ886F4uS2qCwSCDSl3px8SJw663V+1Ip4NOfLr82N3dQKGygUNjAwuJVvLUA9H/Ui/1vD2Hf20NI7HAehwSHwiKB2PvBAN55vwsLd25jzx51vZ4eYGICuwl62wYuXy7i3XeL+OCdJXzixXGkL/Y15qJJbPD78TMhFSS2Ddxxai9Ov1xexqCLYZTl9bnPAUf/oITfPjCPpcmNul0niScUFgnMnnMp3PLLCbz0fAJnzwLFYrDjJyeBe+618frvX4ad4PoGoo9qSCh79A6TDmSXibkBpC/1Ys4s4Llbr2HvARvj48DevcDICKQziRXHTwDDt5Rw5YY1jH8w0JiLJq1O1R1GxQpJyJ/ESogvvatJ3HFqL46cHsPiwTVcmVrHuxNFFMc2kR4tr24/eBDSVfFAOdLK79+gsIgfu/Ji0p3UTHIzUbG+qtSzg+W9RRT2beDUbSu4494SjhypPi6VAi6mSg2+WtLO6AqL0RcBACxNbuDsFy9j+HIvpt4axuj5fhhC4J7cTGD0fD9Gz/djcnYAZyc/kgprZwcwuLyBlJEOAUVkwopsiGhOF6Z4T6x4kZ9axw2fKWFoqIS5uVW8Pt+FsXMpZOb7MJjvQd9KEt2bCex02VgbLuHcJ69iaEje1vo6uJg0jgS/F5aImMvaJYnqBLuXoPz2kw6guxs4fLj8Wlvbxvz8CvL5FVxYKktoa6t8p4b+fmD/fuD22+XtXL4MjHMtFvGPrCoeVa9TUUdmpM1xngcY5KEPqRRw883lVxCWl4HChwnc8VG/1jWR2OM5O+jgXoelc4DWOJO0F+JDSustia0t4LXXgJteGUXXlnopoHgdsoepkrZH1zc2cF1YXhKSNUhpxQyZtGTi6tpKYGGhfJO+MPe0WlwEXnwRGDw1ggNvDEvryM5NWcUSmVc8XaSzcNRdxqFhTLDuywCofGS9IwX3A0vn5uYqhohTbw2h1LODV99cxebkJvbsKT9gYni4/MScvr7ynRvKT80pR1MrK0ChAJw/D1w7l8SRV0Yx+Z78FjM6ouIj6mOFNLkOhbwM+zgykN8OWfbuFpX2rZM5U9jauKXlIHvKspjbKg6UcHWiiKvjG1hNb2FjsIRiahvbyR3YXTYSpQSSmwmklpMYzPdgz7lUeRmEZCmDLJqjrNoQ/RlCUUiymcGqNJVMWOK7l6S0pEVhtQdhxVULFFXM0BOWl6zE7aoclnLNQ4CGmdOKAc4w0Y15pn5Jednwj7KKNTJf+G3DtS3NYYn5K51t5rZigiy3BZRFIua2gHDRFqOqjkQWFAWWl2EfR9r5DPVwT3yX1VfVA8BhYbuiM0wMIi0m1WOMfDgYZPQmvlfJS1yHpQzFJCdVhXeqtkgbohomulEtgfCrQ1nFGlWqyc8bYv2Ktty3l3HvNDTeZXVlJyNtTtglEO5yNxRVbJFJSLZfR1ZSeSVdhbI8lExWDipBiceTmGDdl5HmtoDr4nLntnQXf1JWsUHV38MOC6vKDfs4hqG3fAEaZV7lsHKZebGMtCe6SyB26zOqijdZc5+k1FdAGmUV20mhUpCZQK+oTAZnEGOE7jCRouooVGKSlQWWFXyS7jprrmxFuWyfbU4XJiVfgLQxXkl5yqpDyJqTkPR3oZZqn1dZ1baYdFdFWkHKxH3wqENigFe05UBRxRq/3JWsTqhIS3a3Bp1EmE4STWVaElNk0RZAWXUYYr9XRVtAQFnh4yGh9vjRo0xnnzMsHBe/IYkP1n0ZwLSfBACY9pOUVczJmuPw6O+umrr7xDL3tueyhqDDQa/7wDPK6jQcaZG449e3oxoWAooISzdM046qxG9gThf2imWEkDYja8r6cZhoy10OrzJZhOXgFVXJjuGCUUI6C1k/9+r7ftGWX5lvDitMHkv1JcRc1pj0KxFCWp+sOYaQfR/hXeObw/L7naBuVMVFo4R0Bqo8lapeoLyWbOFomHyV7GJ8X+Z0YVTxZQghrUrWHIVmH5ccHSavtVsmPkgVQuUwP8ORRVPMaRESH4L2Z6/clbvMNwHvlcOSlanMGdSyu5jTBflqQ0JI65E1/fprEBd4RVWQlSV8DtIp17kIv6FhWvXtCSEtQtZMQ09IQYMb1b6qct1lDbLlC6rIiYtGSdtjZz3ulVNnWvjXAWH7su6QUPV59z2pqKiaHQyz7kprhtCcLoxYucxVnbqE1INmSsqN+zpaRl5ZcyRAbVlU5VdPdUxFtOWXdEeAfX4X54s5XRi2cpnlsMcTEhZRVjd/JbpnLwZl9mfX79RqZ482X1pZczjgEX4OkOWoVPsqpCZGWEGGe5whJLHALatmikq8BkdcLSCtKPpw0JlCacSVQLCwLNIZQhnmdGEo6DGEhMWR1c1fOdwSsnLjvqamDVezZpj+WOtMoXJIKT75GT7bQU8e6mVOFwbk/w6ERIdbVq1M06SVNQcQUZ8WWlbt93VRQtihI66g0VSoL0dpkXriJyvDAO751Dq+/+0r+O0vPsDsyTnMnpzDg/evSOuPDO7gb7++iFNPncNbz72P00//Dt//9hXs21uK5HobLq2yrIDa5eQQ5Dile2TrsPwOFsvCXLwfTqSVCnk8IUp0Ov0dhzfx3z+Yx4P3ryDVv+NZdyC1g6cfu4CvPXgVUxMldCdt7B3dxoP3r+DZH57H1EQ00nKou7SyZgoR9F+PF+DvFWk74m8JZe+qxnQurOaXOV3ol/2LEFIrXkPBHRt45Td9eOQf9uJHP0l7tvONh5Zw5NAmAODfcyP4zAOH8N1/2QMAGB/dxt/82WLdrzcysmY/GtCvhbOqyqreVQ+hkOF3fyy/44MQVTuEhOKtuR489K39AICv//GSZ90vfzxM3CoZeOyJURQ3DfzXL4bxJ9NLODhZwn2fXcPI4A6uXkvg0NQWvvOneZif2EB6aAcXF7rw+nu9ePbkIH718gB2mv+XH8UV6LQhqyNGV1X1xBwWhG3dEM7rAmu1L8zpQp9H+4RoE3Wiff94CXsy2wCAD+eTKG5e/z989lwPAKCry8adtxRhGMATj87j/ntXMZbeRleXjamJEu6/dxX/9t1LuP3wpu/56prLypqyflZz/1W0JSuXna+iTpDHfMmo1wNUZdLqtXKZYoi2CKkbjqwA4NpaomLftdXr22OZbewfL+HgZDmf9cOnMvjRT9JID+3griNFPPSHy82NrrJmr2JPJP3Xp47qc9W2+FtCsZKuuNx1vS6sJszpQo+Vy/j/N1TrefL5eQCwRkdlj98mRIpheG9fyXdhbT2BVP8Ojn1qHecvJ/H+R9147WwffnW6ifNLWbMHDei/0JeUsszrbg3QKAsbGuogbdOcLnTX2K4njqzEz4TIWCh07X4eTFXOJg4NXN9eLHRhc8vAX35vHB9eTOLYJzfw99+8gp/+4wX837Mf4IlH5zE6so2GkzW70cD+C7k/ZMdJ21L9+Bnwjrhk9aNGaV1zupAEACuXiXS+WCYoM5+fZ6RFVFy4nMTiUhfG0ts4MFlCX6+NjWK5m9xyY3kwsL1t4I33yiOuF06n8MLpGzA1UcKhqS3cdaSIb30tj8+b6/irhwv4u3/e05gLz5pJ/0o1oRs16dTf3ZcwHpdW8ou4VI3X+1WBOe36742QJvHM8+Vfr3QnbXzzq3mMDO7gqw9cxf7x8v+nJ19O4eq1BHq6bTz92AV86QvXkEjYePU3ffj1mRRKpbLgDk1tNeaCs6as3zS8/3rsUx5XMW61j0u/nqH47FWvXkgNbeUykcXSYpTF6Co4Zj6/+xBV44T1cDOvRUR3lvDARAkvPXXOs86dX7oJxU0DA6kdPPNPF3bXYrm5ku/Cg38xhfOXkujtsfHGL99XtveD/xjFv/qs+QKu/yg61A+i5bICmth/Jfuq6x0tX17FtIbxePklaSioLes1BpbWMacLCcm+ULgFRVnFD6eTu2/hUiurawn80V/vx38+O4Lzl5IolQxcyXfhmf8dwgPfKMsKAIqbBr7851N4+rkhzH7YjeKmgfWigTdme/C9H4/hxz9N+56rRlnJfjvs0LT+61nvqLErK0DDqoqoS3ZsMwxd9Y9g5TL1zq0RH1o5wgL0o6xWYnZ29nrkbxn7Agkra8r6Zkv2XwAVghLxjUwUUZdzMrcRG2VoZfvG48DRQoHPQCRaRBll1ZMKWQGAaevPXj9y1FAIoOX6rxhNydCeKXBLSxJ11SOq0WpTJlNHWmcyjLZINcbMmZa5HXLdeETo+e7NM1Xdomn9109QIqGmNkVJeAwbI/+HUER7Uo4WCgalRWQ40pr92VxbDQ21EGUlIu6uFphD9H0noKBEIlmLoZKIh8hCtxkURltERdtIyzL2uYeBxglLPhnkJyoVqsPUIgvfZo10XL6H4qo/rZ50F2m1e7o7uHNsnkn2sKJqQ+q92rXlYMRFRNw5LUcSrfLUHMBDVh0kKoeOE5YDxUXciIn4VplBlMqqA0Xl0LHCcqC4iINbDi355OcOFpVDxwvLwb1+i/IiTX94qQMlVQGFJYHyIk2FklJCYfkgrpynwEjkUFDaUFgBUf30hyIjvlBMhBBCCCGEEEIIIYQQQgghhBBCCCGEEEIIIYQQQgghhBBCCCGEEEIIIYQQQgghhBBCCCGEEEIIIe3I/wPRQDa1HB8IMAAAAABJRU5ErkJggg==';
                capsuleImg.alt = 'Super Capsule';
                capsuleImg.classList.add('capsule-img');
                capsuleImg.draggable = false;
                capsuleEl.appendChild(capsuleImg);

                const bottomPosition = Math.floor(Math.random() * 60) + 20;
                capsuleEl.style.bottom = `${bottomPosition}%`;
                capsuleEl.style.right = '-140px';

                gameContainer.appendChild(capsuleEl);

                const elapsed = (Date.now() - gameStartTime) / 1000;
                const diff = getDifficulty(elapsed);
                const capsuleSpeed = Math.random() * 3 + diff.packSpeedMin + 2;
                capsuleEl.style.animation = `moveAmmoPack ${capsuleSpeed}s linear forwards`;

                const capsuleEntry = { element: capsuleEl, destroyed: false };
                activeSuperCapsules.push(capsuleEntry);

                capsuleEl.addEventListener('animationend', () => {
                    capsuleEl.remove();
                    const idx = activeSuperCapsules.indexOf(capsuleEntry);
                    if (idx !== -1) activeSuperCapsules.splice(idx, 1);
                });
            }

            // Spawning de super capsule: ultra raro, solo tras 50+ amenazas
            function startSuperCapsuleSpawner() {
                function scheduleCheck() {
                    // Revisar cada 20-40 segundos si puede aparecer
                    const checkDelay = Math.random() * 20000 + 20000;
                    superCapsuleSpawnTimeout = setTimeout(() => {
                        if (gameOver) return;
                        if (cyberattackCount >= 25 && !godModeActive) {
                            // Probabilidad ultra baja: ~3% cada chequeo
                            if (Math.random() < 0.03) {
                                createSuperCapsule();
                            }
                        }
                        scheduleCheck();
                    }, checkDelay);
                }
                scheduleCheck();
            }

            // Disparo gratuito (god mode) - no consume misiles
            function shootGodMissile() {
                if (gameOver || !gameStarted) return;

                const missile = document.createElement('img');
                missile.src = './img/missil.png';
                missile.classList.add('missile', 'god-missile');

                const spaceshipRect = spaceship.getBoundingClientRect();
                const gameContainerRect = gameContainer.getBoundingClientRect();

                missile.style.position = 'absolute';
                const bottomVal = parseFloat(spaceship.style.bottom) || (gameContainerRect.height / 2);
                missile.style.bottom = `${bottomVal + spaceshipRect.height - 15}px`;
                const startX = spaceshipRect.left - gameContainerRect.left + spaceshipRect.width;
                missile.style.left = startX + 'px';

                gameContainer.appendChild(missile);
                activeMissiles.push({ element: missile, tx: 0, originX: startX });
            }

            // Activar God Mode
            function activateGodMode() {
                if (godModeActive) return;
                godModeActive = true;

                // Crear halo alrededor de la nave
                const halo = document.createElement('div');
                halo.id = 'god-mode-halo';
                halo.classList.add('god-halo');
                spaceship.parentElement.appendChild(halo);

                // Posicionar el halo sobre la nave (se actualiza en el game loop)
                function updateHaloPosition() {
                    if (!godModeActive) return;
                    const shipRect = spaceship.getBoundingClientRect();
                    const containerRect = gameContainer.getBoundingClientRect();
                    const centerX = shipRect.left - containerRect.left + shipRect.width / 2;
                    const centerY = shipRect.top - containerRect.top + shipRect.height / 2;
                    halo.style.left = centerX + 'px';
                    halo.style.top = centerY + 'px';
                    requestAnimationFrame(updateHaloPosition);
                }
                updateHaloPosition();

                // Auto-fire continuo
                godModeAutoFireInterval = setInterval(() => {
                    if (gameOver || !godModeActive) {
                        clearInterval(godModeAutoFireInterval);
                        return;
                    }
                    shootGodMissile();
                }, GOD_MODE_AUTOFIRE_RATE);

                // A los 5 segundos restantes: empezar parpadeo de aviso
                godModeBlinkTimer = setTimeout(() => {
                    halo.classList.add('god-halo-warning');
                }, GOD_MODE_DURATION - GOD_MODE_WARN_AT);

                // Al terminar: desactivar todo
                godModeTimer = setTimeout(() => {
                    deactivateGodMode();
                }, GOD_MODE_DURATION);
            }

            function deactivateGodMode() {
                godModeActive = false;

                if (godModeAutoFireInterval) {
                    clearInterval(godModeAutoFireInterval);
                    godModeAutoFireInterval = null;
                }
                if (godModeTimer) {
                    clearTimeout(godModeTimer);
                    godModeTimer = null;
                }
                if (godModeBlinkTimer) {
                    clearTimeout(godModeBlinkTimer);
                    godModeBlinkTimer = null;
                }

                const halo = document.getElementById('god-mode-halo');
                if (halo) {
                    halo.classList.add('god-halo-fadeout');
                    setTimeout(() => halo.remove(), 500);
                }
            }

            // Victoria: alcanz√≥ rango m√°ximo "Dios del Ciberespacio"
            function showVictoryMessage() {
                if (gameLoopId) {
                    cancelAnimationFrame(gameLoopId);
                    gameLoopId = null;
                }

                const elapsedSeconds = Math.floor((Date.now() - gameStartTime) / 1000);
                const maxLevelInfo = DIFFICULTY_LEVELS[maxDifficultyLevel];
                const godRank = RANK_TABLE[RANK_TABLE.length - 1];

                const victoryOverlay = document.createElement('div');
                victoryOverlay.id = 'game-over-message';
                victoryOverlay.innerHTML = `
                    <h1 class="victory-title" style="color:${godRank.color};text-shadow:0 0 20px ${godRank.color}, 0 0 40px ${godRank.color}80;font-size:1.6em;animation:victoryPulse 1.5s ease-in-out infinite;">&#9733; VICTORIA TOTAL &#9733;</h1>
                    <p class="game-over-reason" style="color:#ffdd00;font-size:1.1em;">Has alcanzado el rango supremo</p>
                    <p class="player-result" style="font-size:1.2em;">Defensor: <strong>${playerName}</strong></p>
                    <p class="player-rank" style="color:${godRank.color};text-shadow:0 0 15px ${godRank.color}, 0 0 30px ${godRank.color}60;font-size:1.4em;margin:0.3em 0 0.6em;letter-spacing:2px;animation:victoryPulse 2s ease-in-out infinite;">&#9889; ${godRank.name} &#9889;</p>
                    <div class="stats-row">
                        <div class="stat-box">
                            <span class="stat-value" style="color:${godRank.color};">${cyberattackCount}</span>
                            <span class="stat-label">Amenazas Neutralizadas</span>
                        </div>
                        <div class="stat-box">
                            <span class="stat-value">${elapsedSeconds}s</span>
                            <span class="stat-label">Tiempo de Misi√≥n</span>
                        </div>
                        <div class="stat-box">
                            <span class="stat-value">${missileCount}</span>
                            <span class="stat-label">Misiles Restantes</span>
                        </div>
                        <div class="stat-box">
                            <span class="stat-value" style="color:${maxLevelInfo.color};font-size:0.85em;">${maxLevelInfo.name}</span>
                            <span class="stat-label">Nivel M√°ximo</span>
                        </div>
                    </div>
                    <div id="leaderboard-placeholder"><p style="color:#88aacc;">Cargando leaderboard...</p></div>
                    <div class="buttons-container">
                        <button id="exit-button">Salir</button>
                        <button id="restart-game-button">Reiniciar Juego</button>
                        <button id="clear-leaderboard-button" title="Limpiar Leaderboard">
                            <svg viewBox="0 0 64 64" width="28" height="28" style="vertical-align:middle;">
                                <defs>
                                    <linearGradient id="lbResetGrad" x1="0" y1="0" x2="0" y2="1">
                                        <stop offset="0%" stop-color="#00d4ff"/>
                                        <stop offset="100%" stop-color="#0077cc"/>
                                    </linearGradient>
                                </defs>
                                <!-- Flecha circular de reset -->
                                <path d="M32 8 A24 24 0 1 1 10 22" fill="none" stroke="url(#lbResetGrad)" stroke-width="3.5" stroke-linecap="round"/>
                                <polygon points="6,14 14,14 10,24" fill="#00d4ff"/>
                                <!-- Barras de gr√°fico ascendente -->
                                <rect x="20" y="40" width="6" height="12" rx="1" fill="#00d4ff" opacity="0.7"/>
                                <rect x="29" y="33" width="6" height="19" rx="1" fill="#00aaee" opacity="0.85"/>
                                <rect x="38" y="25" width="6" height="27" rx="1" fill="#0088dd"/>
                                <!-- Estrella en la cima -->
                                <polygon points="41,19 42.5,23 47,23.5 43.5,26.5 44.5,31 41,28.5 37.5,31 38.5,26.5 35,23.5 39.5,23" fill="#ffd700" stroke="#ffaa00" stroke-width="0.5"/>
                                <!-- Destellos -->
                                <circle cx="18" cy="15" r="1.2" fill="#ffffff" opacity="0.8"/>
                                <circle cx="50" cy="18" r="0.8" fill="#ffffff" opacity="0.6"/>
                                <circle cx="14" cy="35" r="1" fill="#ffffff" opacity="0.5"/>
                            </svg>
                        </button>
                    </div>
                `;
                gameContainer.appendChild(victoryOverlay);

                gameContainer.style.cursor = 'default';
                const musicBtn = document.getElementById('toggle-music-button');
                if (musicBtn) musicBtn.style.pointerEvents = 'auto';
                const fireBtn = document.getElementById('mobile-fire-button');
                if (fireBtn) fireBtn.style.display = 'none';

                victoryOverlay.addEventListener('click', function(event) {
                    event.stopPropagation();
                    if (event.target && event.target.id === 'exit-button') {
                        window.close();
                        window.location.href = 'about:blank';
                    }
                    if (event.target && event.target.id === 'restart-game-button') {
                        resetGame();
                    }
                    if (event.target && event.target.id === 'clear-leaderboard-button') {
                        const pwd = prompt('Ingresa la clave de administrador:');
                        if (pwd === '66826682') {
                            localStorage.removeItem('cyberspace_leaderboard');
                            clearRemoteLeaderboard();
                            const lbContainer = document.getElementById('leaderboard-container');
                            if (lbContainer) {
                                lbContainer.innerHTML = '<h2>Leaderboard - Top 100</h2><p style="color:#88aacc;margin-top:10px;">Leaderboard limpiado</p>';
                            }
                        } else if (pwd !== null) {
                            alert('Clave incorrecta');
                        }
                    }
                });

                addToLeaderboard(playerName, cyberattackCount, elapsedSeconds).then(board => {
                    const placeholder = document.getElementById('leaderboard-placeholder');
                    if (placeholder) {
                        placeholder.outerHTML = buildLeaderboardHTML(board);
                    }
                }).catch(err => {
                    console.warn('Error cargando leaderboard:', err);
                    const placeholder = document.getElementById('leaderboard-placeholder');
                    if (placeholder) {
                        placeholder.innerHTML = '<p style="color:#ff6666;">Error cargando leaderboard</p>';
                    }
                });
            }

            // Mostrar mensaje de "Game Over" con leaderboard
            function showGameOverMessage(reason) {
                // Detener god mode si estaba activo
                deactivateGodMode();

                // Detener el game loop
                if (gameLoopId) {
                    cancelAnimationFrame(gameLoopId);
                    gameLoopId = null;
                }

                const elapsedSeconds = Math.floor((Date.now() - gameStartTime) / 1000);

                // Crear el overlay de Game Over INMEDIATAMENTE (sin esperar async)
                const gameOverMessage = document.createElement('div');
                gameOverMessage.id = 'game-over-message';
                const maxLevelInfo = DIFFICULTY_LEVELS[maxDifficultyLevel];
                const playerRank = getRank(cyberattackCount);
                gameOverMessage.innerHTML = `
                    <h1>Misi√≥n Finalizada</h1>
                    ${reason ? `<p class="game-over-reason">${reason}</p>` : ''}
                    <p class="player-result">Defensor: <strong>${playerName}</strong></p>
                    <p class="player-rank" style="color:${playerRank.color};text-shadow:0 0 10px ${playerRank.color}60;font-size:1.1em;margin:0.2em 0 0.5em;letter-spacing:1px;">&#9733; ${playerRank.name} &#9733;</p>
                    <div class="stats-row">
                        <div class="stat-box">
                            <span class="stat-value">${cyberattackCount}</span>
                            <span class="stat-label">Amenazas Neutralizadas</span>
                        </div>
                        <div class="stat-box">
                            <span class="stat-value">${elapsedSeconds}s</span>
                            <span class="stat-label">Tiempo de Misi√≥n</span>
                        </div>
                        <div class="stat-box">
                            <span class="stat-value">${missileCount}</span>
                            <span class="stat-label">Misiles Restantes</span>
                        </div>
                        <div class="stat-box">
                            <span class="stat-value" style="color:${maxLevelInfo.color};font-size:0.85em;">${maxLevelInfo.name}</span>
                            <span class="stat-label">Nivel M√°ximo</span>
                        </div>
                    </div>
                    <div id="leaderboard-placeholder"><p style="color:#88aacc;">Cargando leaderboard...</p></div>
                    <div class="buttons-container">
                        <button id="exit-button">Salir</button>
                        <button id="restart-game-button">Reiniciar Juego</button>
                        <button id="clear-leaderboard-button" title="Limpiar Leaderboard">
                            <svg viewBox="0 0 64 64" width="28" height="28" style="vertical-align:middle;">
                                <defs>
                                    <linearGradient id="lbResetGrad" x1="0" y1="0" x2="0" y2="1">
                                        <stop offset="0%" stop-color="#00d4ff"/>
                                        <stop offset="100%" stop-color="#0077cc"/>
                                    </linearGradient>
                                </defs>
                                <!-- Flecha circular de reset -->
                                <path d="M32 8 A24 24 0 1 1 10 22" fill="none" stroke="url(#lbResetGrad)" stroke-width="3.5" stroke-linecap="round"/>
                                <polygon points="6,14 14,14 10,24" fill="#00d4ff"/>
                                <!-- Barras de gr√°fico ascendente -->
                                <rect x="20" y="40" width="6" height="12" rx="1" fill="#00d4ff" opacity="0.7"/>
                                <rect x="29" y="33" width="6" height="19" rx="1" fill="#00aaee" opacity="0.85"/>
                                <rect x="38" y="25" width="6" height="27" rx="1" fill="#0088dd"/>
                                <!-- Estrella en la cima -->
                                <polygon points="41,19 42.5,23 47,23.5 43.5,26.5 44.5,31 41,28.5 37.5,31 38.5,26.5 35,23.5 39.5,23" fill="#ffd700" stroke="#ffaa00" stroke-width="0.5"/>
                                <!-- Destellos -->
                                <circle cx="18" cy="15" r="1.2" fill="#ffffff" opacity="0.8"/>
                                <circle cx="50" cy="18" r="0.8" fill="#ffffff" opacity="0.6"/>
                                <circle cx="14" cy="35" r="1" fill="#ffffff" opacity="0.5"/>
                            </svg>
                        </button>
                    </div>
                `;
                gameContainer.appendChild(gameOverMessage);

                // Mostrar cursor en game over para poder usar botones
                gameContainer.style.cursor = 'default';

                // Reactivar bot√≥n de m√∫sica para que sea clickeable en game over
                const musicBtn = document.getElementById('toggle-music-button');
                if (musicBtn) musicBtn.style.pointerEvents = 'auto';

                // Ocultar bot√≥n de disparo m√≥vil en game over
                const fireBtn = document.getElementById('mobile-fire-button');
                if (fireBtn) fireBtn.style.display = 'none';

                gameOverMessage.addEventListener('click', function(event) {
                    event.stopPropagation();
                    if (event.target && event.target.id === 'exit-button') {
                        window.close();
                        window.location.href = 'about:blank';
                    }
                    if (event.target && event.target.id === 'restart-game-button') {
                        resetGame();
                    }
                    if (event.target && event.target.id === 'clear-leaderboard-button') {
                        const pwd = prompt('Ingresa la clave de administrador:');
                        if (pwd === '66826682') {
                            localStorage.removeItem('cyberspace_leaderboard');
                            clearRemoteLeaderboard();
                            const lbContainer = document.getElementById('leaderboard-container');
                            if (lbContainer) {
                                lbContainer.innerHTML = '<h2>Leaderboard - Top 100</h2><p style="color:#88aacc;margin-top:10px;">Leaderboard limpiado</p>';
                            }
                        } else if (pwd !== null) {
                            alert('Clave incorrecta');
                        }
                    }
                });

                // Cargar leaderboard en segundo plano (no bloquea el UI)
                addToLeaderboard(playerName, cyberattackCount, elapsedSeconds).then(board => {
                    const placeholder = document.getElementById('leaderboard-placeholder');
                    if (placeholder) {
                        placeholder.outerHTML = buildLeaderboardHTML(board);
                    }
                }).catch(err => {
                    console.warn('Error cargando leaderboard:', err);
                    const placeholder = document.getElementById('leaderboard-placeholder');
                    if (placeholder) {
                        placeholder.innerHTML = '<p style="color:#ff6666;">Error cargando leaderboard</p>';
                    }
                });
            }

            // Reiniciar el juego
            function resetGame() {
                const gameOverMessage = document.getElementById('game-over-message');
                if (gameOverMessage) {
                    gameOverMessage.remove();
                }
                gameOver = false;
                // Ocultar cursor de nuevo al reiniciar
                gameContainer.style.cursor = 'none';
                // Desactivar pointer-events del bot√≥n de m√∫sica durante gameplay
                const musicBtnReset = document.getElementById('toggle-music-button');
                if (musicBtnReset) musicBtnReset.style.pointerEvents = 'none';
                lightYears = 0;
                asteroidCount = 0;
                cyberattackCount = 0;
                missileCount = 50;
                missilesUsed = 0;
                packsCollected = 0;
                gameStartTime = Date.now();
                currentEntryId = null;
                distanceCounter.textContent = `Ciberpasos: ${lightYears}`;
                asteroidCounter.textContent = `Paquetes Basura: ${asteroidCount}`;
                cyberattackCounter.textContent = `Amenazas Neutralizadas: ${cyberattackCount}`;
                updateMissileDisplay();

                // Reiniciar HUD de dificultad y fondo
                updateDifficultyHUD(0);
                bgScrollX = 0;
                bgCurrentSpeed = 20;
                bgTargetSpeed = 20;
                if (backgroundEl) {
                    backgroundEl.style.transform = 'translate3d(0%, 0, 0)';
                }

                spaceship.style.bottom = '50%';
                spaceship.style.left = '25%';
                spaceship.style.transform = 'translate(-50%, 50%)';

                document.querySelectorAll('.asteroid').forEach(asteroid => asteroid.remove());
                document.querySelectorAll('.cyber-attack').forEach(cyber => cyber.remove());
                document.querySelectorAll('.ammo-pack').forEach(pack => pack.remove());
                document.querySelectorAll('.missile').forEach(m => m.remove());
                document.querySelectorAll('.super-capsule').forEach(sc => sc.remove());
                const haloEl = document.getElementById('god-mode-halo');
                if (haloEl) haloEl.remove();

                // Limpiar god mode
                deactivateGodMode();
                activeSuperCapsules.length = 0;
                clearTimeout(superCapsuleSpawnTimeout);

                // Limpiar arrays de entidades
                activeMissiles.length = 0;
                activeHazards.length = 0;
                activePacks.length = 0;

                // Reiniciar estado t√°ctil y mouse
                touchTargetBottom = -1;
                shipCurrentBottom = -1;
                isTouchControlled = false;
                lastMobileFireTime = 0;
                mouseTargetBottom = -1;
                isMouseControlled = false;

                // Actualizar dimensiones cacheadas por si cambi√≥ el viewport
                cachedContainerHeight = gameContainer.clientHeight;
                cachedSpaceshipHeight = spaceship.clientHeight;

                // Restaurar bot√≥n de disparo m√≥vil si es touch device
                const isTouchDev = 'ontouchstart' in window || navigator.maxTouchPoints > 0 || window.matchMedia('(pointer: coarse)').matches;
                const fireBtnReset = document.getElementById('mobile-fire-button');
                if (isTouchDev && fireBtnReset) fireBtnReset.style.display = 'flex';

                clearTimeout(asteroidSpawnTimeout);
                clearInterval(distanceInterval);
                clearTimeout(ammoPackTimeout);
                maxDifficultyLevel = 0;

                // Reiniciar loops
                lastFrameTime = 0;
                startDistanceCounter();
                startAsteroids();
                startAmmoPacks();
                startSuperCapsuleSpawner();
                gameLoopId = requestAnimationFrame(gameLoop);
            }

            // Iniciar la creaci√≥n de asteroides y cyberattacks (dificultad din√°mica)
            function startAsteroids() {
                const asteroidImages = [
                    './img/rock-1.png',
                    './img/rock-2.png',
                    './img/rock-3.png',
                    './img/rock-4.png',
                    './img/rock-5.png',
                    './img/rock-6.png',
                    './img/rock-7.png',
                    './img/rock-8.png',
                    './img/rock-9.png',
                    './img/rock-10.png',
                    './img/rock-11.png',
                    './img/rock-12.png',
                    './img/rock-13.png'
                ];

                const cyberAttackImages = [
                    './img/aster-1.png',
                    './img/aster-2.png',
                    './img/aster-3.png',
                    './img/aster-4.png',
                    './img/aster-5.png',
                    './img/aster-6.png'
                ];

                function scheduleNextSpawn() {
                    const elapsed = (Date.now() - gameStartTime) / 1000;
                    const diff = getDifficulty(elapsed);

                    asteroidSpawnTimeout = setTimeout(() => {
                        if (gameOver) return;

                        // Spawn asteroide principal
                        const randomAsteroid = asteroidImages[Math.floor(Math.random() * asteroidImages.length)];
                        createAsteroid(randomAsteroid, false);

                        // Multi-spawn: chance de un segundo asteroide simult√°neo
                        if (Math.random() < diff.multiSpawnChance) {
                            const extraAsteroid = asteroidImages[Math.floor(Math.random() * asteroidImages.length)];
                            createAsteroid(extraAsteroid, false);
                        }

                        // Probabilidad din√°mica de cyberattack
                        if (Math.random() < diff.cyberProbability) {
                            const randomCyber = cyberAttackImages[Math.floor(Math.random() * cyberAttackImages.length)];
                            createCyberAttack(randomCyber);
                        }

                        scheduleNextSpawn();
                    }, diff.spawnInterval);
                }

                scheduleNextSpawn();
            }

            startAsteroids();
            startAmmoPacks();
            startSuperCapsuleSpawner();

        } // fin de initGame

        // Iniciar con la pantalla de ingreso de alias
        initPlayerScreen();
    })();
